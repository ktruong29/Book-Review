{% extends 'dashboard_base.html' %} {% block head %}
<title>View and Comment Books</title>
{% endblock %} {% block body %}
<main>
    <div class="container marketing" style="padding-top:100px">
        <hr class="featurette-divider">
        <!-- Book titles + images + books features -->
        <div class="row featurette">
            <div class="col-md-7">
                <h2 class="featurette-heading"> {{ data[1] }}</h2>
                <p class="lead">{{ data[3] }}</p>
                <p> {{ data[2] }}</p>
                <small><a href="{{ data[5] }}" target="_blank">Click here</a> to purchase this book</small>
            </div>
            <div class="col-md-4">
                <img src="/static/images/{{ data[6] }}" alt="Jumping" width="400" height="500" class="rounded mx-auto d-block">
            </div>
        </div>
        <hr>

        <!-- Comment form -->
        <form autocomplete="off" action='/dashboard/books/{{ isbn }}' method='POST'>
            <div class="form-group">
                <div class="row justify-content-between pb-2">
                    <div class="col-auto">
                        <label for="coment">Comments</label>
                    </div>
                    <div class="col-auto">
                        <div class="row">
                            <div class="col-auto">
                                <label for="coment">Rating</label>
                            </div>
                            <style>
                                .stars:not(:checked)>input {
                                    position: absolute;
                                    clip: rect(0, 0, 0, 0);
                                }
                                
                                .stars:not(:checked)>label {
                                    float: right;
                                    width: 0.9em;
                                    overflow: hidden;
                                    cursor: pointer;
                                    color: lightgrey;
                                }
                                
                                .stars:not(:checked)>label:before {
                                    content: "â˜…";
                                }
                                
                                .stars>input:checked~label {
                                    color: gold;
                                }
                                
                                .stars:not(:checked)>label:hover,
                                .stars:not(:checked)>label:hover~label {
                                    color: gold;
                                }
                                
                                .stars>input:checked+label:hover,
                                .stars>input:checked+label:hover~label,
                                .stars>input:checked~label:hover,
                                .stars>input:checked~label:hover~label,
                                .stars>label:hover~input:checked~label {
                                    color: gold;
                                }
                            </style>
                            <div class="col-auto">
                                <ul class="stars">
                                    <input type="radio" id="5-star" name="rating" value="5" /><label for="5-star">5</label>
                                    <input type="radio" id="4-star" name="rating" value="4" /><label for="4-star">4</label>
                                    <input type="radio" id="3-star" name="rating" value="3" /><label for="3-star">3</label>
                                    <input type="radio" id="2-star" name="rating" value="2" /><label for="2-star">2</label>
                                    <input type="radio" id="1-star" name="rating" value="1" /><label for="1-star">1</label>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <textarea class="form-control" id="comment" name="comment" placeholder="Write a comment..." rows="3"></textarea>
                <div class="row justify-content-between pt-3">
                    <div class="col-auto"></div>
                    <div class="col-auto">
                        <input type="submit" class="btn btn-primary" value="Submit">
                    </div>
                </div>
            </div>
        </form>

        <!-- Comments display -->
        <!-- Font Awesome Icon Library -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <hr class="featurette-divider"> {% set counter = namespace(value=0) %} {% for comment in comments %}
        <div class="container pb-3">
            <div class="row justify-content-between">
                <div class="col-auto">
                    <div class="row">
                        <div class="col-auto">
                            <h5>{{ users[counter.value] }}</h5>
                        </div>
                        <div class="col-auto">
                            {% for i in range(5) %}
                                {% if (i + 1) <= comment[3] %}
                                    <span class="fa fa-star" style="color: orange"></span>
                                {% else %}
                                    <span class="fa fa-star"></span>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="col-auto">
                    <p class="text-muted">{{ comment[1] }}</p>
                </div>
            </div>
            <div class="row">
                <p class="lead"><small>{{ comment[2] }}</small></p>
            </div>
        </div>
        {% set counter.value = counter.value + 1 %} {% endfor %}
    </div>
</main>

{% endblock %}